set(library_name rtc_plugin_c)

# Include directories that are required as header references
set(rtc_plugin_c_include_path ${CMAKE_CURRENT_SOURCE_DIR}/include)
include_directories(${rtc_plugin_c_include_path}
                    ${pthreads_path})

# Set include path to have it accessible for other components
set(public_include_path ${rtc_plugin_c_include_path})

if (UNIX)
    #name mangling, these functions are generated by the FortranCInterface cmake package and might be system dependent
    include(FortranCInterface)
    FortranCInterface_HEADER("${CMAKE_CURRENT_SOURCE_DIR}/include/FortranCInterface.h" MACRO_NAMESPACE "FC_")
    #produce a config.h to be included
    configure_file(${CMAKE_CURRENT_SOURCE_DIR}/config.h.cmake.in ${CMAKE_CURRENT_SOURCE_DIR}/include/config.h)  
    set(configFile "${CMAKE_CURRENT_SOURCE_DIR}/include/config.h") 
    add_definitions(-DHAVE_CONFIG_H)
endif(UNIX)

set(headers ${configFile})

set(source  src/f902c.c)


add_library(${library_name} ${source} ${headers})

# Create the folder structure in vfproj
source_group(TREE ${CMAKE_CURRENT_SOURCE_DIR} FILES ${source} ${headers})
set_target_properties (${library_name} PROPERTIES FOLDER engines_gpl/rtc)

#Set preprocessor definitions
target_compile_definitions(${library_name} PRIVATE _LIB;_CRT_SECURE_NO_DEPRECATE)